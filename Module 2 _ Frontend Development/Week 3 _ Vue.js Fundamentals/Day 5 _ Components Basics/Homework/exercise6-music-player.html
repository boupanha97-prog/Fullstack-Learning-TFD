<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 6: Music Player</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-black text-white h-screen overflow-hidden flex flex-col">
    <div id="app" class="flex-1 flex flex-col h-full">
        
        <div class="flex-1 flex overflow-hidden">
            <!-- Sidebar -->
            <library-sidebar></library-sidebar>

            <!-- Main Content -->
            <main class="flex-1 bg-gradient-to-b from-gray-800 to-black p-8 overflow-y-auto">
                <header class="flex justify-between items-center mb-8">
                    <div class="flex gap-4">
                        <button class="bg-black/40 rounded-full w-8 h-8 flex items-center justify-center"><i class="fas fa-chevron-left"></i></button>
                        <button class="bg-black/40 rounded-full w-8 h-8 flex items-center justify-center"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <button class="bg-black/40 rounded-full px-4 py-1 text-sm font-bold hover:scale-105 transition">Log in</button>
                </header>

                <playlist-view :playlist="currentPlaylist" :songs="songs" @play-song="playSong"></playlist-view>
            </main>
        </div>

        <!-- Player Controls -->
        <player-controls :current-song="currentSong" :is-playing="isPlaying" @toggle-play="isPlaying = !isPlaying"></player-controls>

    </div>

    <script>
        const { createApp } = Vue;
        const app = createApp({
            data() {
                return {
                    isPlaying: false,
                    currentSong: null,
                    currentPlaylist: {
                        name: 'Chill Vibes',
                        cover: 'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=400',
                        description: 'Relax and unwind with these smooth tracks.',
                        likes: '1,234,567'
                    },
                    songs: [
                        { id: 1, title: 'Midnight City', artist: 'M83', album: 'Hurry Up, We\'re Dreaming', duration: '4:03', image: 'https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=200' },
                        { id: 2, title: 'Get Lucky', artist: 'Daft Punk', album: 'Random Access Memories', duration: '6:09', image: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=200' },
                        { id: 3, title: 'The Less I Know The Better', artist: 'Tame Impala', album: 'Currents', duration: '3:36', image: 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=200' },
                        { id: 4, title: 'Blinding Lights', artist: 'The Weeknd', album: 'After Hours', duration: '3:20', image: 'https://images.unsplash.com/photo-1514525253440-b393452e8d26?w=200' }
                    ]
                }
            },
            created() {
                this.currentSong = this.songs[0];
            },
            methods: {
                playSong(song) {
                    this.currentSong = song;
                    this.isPlaying = true;
                }
            }
        });

        // 1. Sidebar
        app.component('library-sidebar', {
            template: `
                <aside class="w-64 bg-black p-6 flex flex-col gap-6">
                    <div class="text-2xl font-bold mb-4"><i class="fab fa-spotify mr-2"></i> MusicApp</div>
                    <nav class="space-y-4 font-bold text-gray-400">
                        <a href="#" class="flex items-center gap-4 text-white hover:text-white transition"><i class="fas fa-home text-xl w-6"></i> Home</a>
                        <a href="#" class="flex items-center gap-4 hover:text-white transition"><i class="fas fa-search text-xl w-6"></i> Search</a>
                        <a href="#" class="flex items-center gap-4 hover:text-white transition"><i class="fas fa-book text-xl w-6"></i> Your Library</a>
                    </nav>
                    <div class="mt-4 space-y-4 font-bold text-gray-400">
                        <button class="flex items-center gap-4 hover:text-white transition"><div class="bg-gray-300 text-black p-1 rounded-sm"><i class="fas fa-plus"></i></div> Create Playlist</button>
                        <button class="flex items-center gap-4 hover:text-white transition"><div class="bg-gradient-to-br from-purple-700 to-blue-300 p-1 rounded-sm"><i class="fas fa-heart"></i></div> Liked Songs</button>
                    </div>
                    <div class="border-t border-gray-800 pt-4 flex-1 overflow-y-auto text-sm text-gray-400 space-y-2">
                        <p class="hover:text-white cursor-pointer">Chill Vibes</p>
                        <p class="hover:text-white cursor-pointer">Rock Classics</p>
                        <p class="hover:text-white cursor-pointer">Focus Flow</p>
                    </div>
                </aside>
            `
        });

        // 2. Playlist View
        app.component('playlist-view', {
            props: ['playlist', 'songs'],
            template: `
                <div>
                    <div class="flex items-end gap-6 mb-8">
                        <img :src="playlist.cover" class="w-52 h-52 shadow-2xl shadow-black/50">
                        <div>
                            <p class="uppercase text-xs font-bold mb-2">Playlist</p>
                            <h1 class="text-7xl font-bold mb-6">{{ playlist.name }}</h1>
                            <p class="text-gray-400 text-sm mb-2">{{ playlist.description }}</p>
                            <div class="flex items-center gap-1 text-sm font-bold">
                                <span>Spotify</span> • <span>{{ playlist.likes }} likes</span> • <span>{{ songs.length }} songs, 15 min</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-black/20 p-6 -mx-8 px-8">
                        <div class="flex items-center gap-8 mb-8">
                            <button class="w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-black text-xl hover:scale-105 transition shadow-lg">
                                <i class="fas fa-play pl-1"></i>
                            </button>
                            <button class="text-gray-400 hover:text-white text-3xl"><i class="far fa-heart"></i></button>
                            <button class="text-gray-400 hover:text-white text-xl"><i class="fas fa-ellipsis-h"></i></button>
                        </div>

                        <table class="w-full text-left text-gray-400 text-sm">
                            <thead class="border-b border-gray-700 uppercase text-xs">
                                <tr>
                                    <th class="pb-2 w-12">#</th>
                                    <th class="pb-2">Title</th>
                                    <th class="pb-2">Album</th>
                                    <th class="pb-2 text-right"><i class="far fa-clock"></i></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(song, i) in songs" :key="song.id" @click="$emit('play-song', song)" class="group hover:bg-white/10 rounded-md cursor-pointer transition">
                                    <td class="py-3 pl-2 group-hover:text-white">
                                        <span class="group-hover:hidden">{{ i + 1 }}</span>
                                        <i class="fas fa-play text-xs hidden group-hover:inline"></i>
                                    </td>
                                    <td class="py-3">
                                        <div class="flex items-center gap-4">
                                            <img :src="song.image" class="w-10 h-10">
                                            <div>
                                                <div class="text-white font-bold text-base">{{ song.title }}</div>
                                                <div class="group-hover:text-white">{{ song.artist }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-3 group-hover:text-white">{{ song.album }}</td>
                                    <td class="py-3 text-right pr-2 group-hover:text-white">{{ song.duration }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `
        });

        // 3. Player Controls
        app.component('player-controls', {
            props: ['currentSong', 'isPlaying'],
            template: `
                <footer class="h-24 bg-gray-900 border-t border-gray-800 px-4 flex justify-between items-center z-50">
                    <!-- Now Playing -->
                    <div class="flex items-center gap-4 w-1/3">
                        <img v-if="currentSong" :src="currentSong.image" class="w-14 h-14">
                        <div v-if="currentSong">
                            <div class="text-sm font-bold hover:underline cursor-pointer">{{ currentSong.title }}</div>
                            <div class="text-xs text-gray-400 hover:underline cursor-pointer hover:text-white">{{ currentSong.artist }}</div>
                        </div>
                        <button class="text-gray-400 hover:text-white ml-2"><i class="far fa-heart"></i></button>
                    </div>

                    <!-- Controls -->
                    <div class="flex flex-col items-center w-1/3">
                        <div class="flex items-center gap-6 mb-2">
                            <button class="text-gray-400 hover:text-white"><i class="fas fa-random"></i></button>
                            <button class="text-gray-400 hover:text-white"><i class="fas fa-step-backward"></i></button>
                            <button 
                                @click="$emit('toggle-play')"
                                class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-black hover:scale-105 transition"
                            >
                                <i class="fas" :class="isPlaying ? 'fa-pause' : 'fa-play pl-0.5'"></i>
                            </button>
                            <button class="text-gray-400 hover:text-white"><i class="fas fa-step-forward"></i></button>
                            <button class="text-gray-400 hover:text-white"><i class="fas fa-redo"></i></button>
                        </div>
                        <div class="w-full flex items-center gap-2 text-xs text-gray-400">
                            <span>0:00</span>
                            <div class="h-1 bg-gray-600 rounded-full flex-1 group cursor-pointer">
                                <div class="h-full w-1/3 bg-white rounded-full group-hover:bg-green-500 relative">
                                    <div class="hidden group-hover:block absolute right-0 -top-1 w-3 h-3 bg-white rounded-full shadow"></div>
                                </div>
                            </div>
                            <span>{{ currentSong ? currentSong.duration : '0:00' }}</span>
                        </div>
                    </div>

                    <!-- Volume -->
                    <div class="flex items-center justify-end gap-3 w-1/3 text-gray-400">
                        <button class="hover:text-white"><i class="fas fa-microphone"></i></button>
                        <button class="hover:text-white"><i class="fas fa-list"></i></button>
                        <button class="hover:text-white"><i class="fas fa-volume-up"></i></button>
                        <div class="w-24 h-1 bg-gray-600 rounded-full cursor-pointer group">
                            <div class="h-full w-2/3 bg-white rounded-full group-hover:bg-green-500"></div>
                        </div>
                    </div>
                </footer>
            `
        });

        app.mount('#app');
    </script>
</body>
</html>